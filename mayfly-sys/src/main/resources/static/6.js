(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{190:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},200:function(e,t,n){var i=n(38),r=n(220);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1},o=(i(e.i,r,s),r.locals?r.locals:{});e.exports=o},201:function(e,t,n){var i=n(38),r=n(222);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1},o=(i(e.i,r,s),r.locals?r.locals:{});e.exports=o},219:function(e,t,n){"use strict";var i=n(200);n.n(i).a},220:function(e,t,n){(t=n(39)(!1)).push([e.i,"",""]),e.exports=t},221:function(e,t,n){"use strict";var i=n(201);n.n(i).a},222:function(e,t,n){(t=n(39)(!1)).push([e.i,".menu .el-tree-node__content {\n  height: 40px;\n  line-height: 40px;\n}\n.none-select {\n  moz-user-select: -moz-none;\n  -moz-user-select: none;\n  -o-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n",""]),e.exports=t},237:function(e,t,n){"use strict";n.r(t);var i=n(184),r=n.n(i),s=n(185),o=n.n(s),a=n(187),l=n(190),c=n.n(l),u=n(186),d=n(191);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var m,f,h,v,g={name:"ResourceEdit",props:{dialogFormVisible:Boolean,data:[Object,Boolean],title:String,type:Number,typeDisabled:Boolean},data:function(){return{permission:u.a.menu,enums:d.a,dialogForm:{title:"",visible:!1,data:{}},props:{value:"id",label:"name",children:"children"},form:{id:null,name:null,pid:null,path:null,code:null,icon:null,type:null,weight:null},btnLoading:!1,rules:{name:[{required:!0,message:"请输入资源名称",trigger:["change","blur"]}]}}},watch:{data:{handler:function(){this.data&&(this.form=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.data))},deep:!0}},methods:{handleChange:function(){},addOperation:function(){this.dialogForm.visible=!0},operationChange:function(e){this.operations.push(e),this.dialogForm.visible=!1},btnOk:function(){var e=this,t=this.form.id?this.permission.update:this.permission.save;this.$Permission.getPermission(t.code).show?this.$refs.menuForm.validate((function(n){if(!n)return e.$message.error("表单填写有误"),!1;t.request(e.form).then((function(t){e.$emit("val-change",e.form),e.btnLoading=!0,setTimeout((function(){e.btnLoading=!1}),1e3),e.cancel()}))})):this.$message.error("您没有该权限!")},cancel:function(){var e=this;this.$emit("cancel"),setTimeout((function(){e.$refs.menuForm.resetFields(),e.$Utils.resetProperties(e.form)}),200)}},mounted:function(){},components:{}},y=(n(219),n(67)),b=Object(y.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu-dialog"},[n("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"show-close":!1,width:"35%"}},[n("el-form",{ref:"menuForm",attrs:{model:e.form,rules:e.rules,"label-width":"85px",size:"small"}},[n("el-form-item",{attrs:{prop:"name",label:"名称:",required:""}},[n("el-input",{attrs:{placeholder:"请输入资源名","auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"==typeof t?t.trim():t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"type",label:"类型:",required:""}},e._l(e.enums.ResourceTypeEnum,(function(t){return n("el-radio",{key:t.value,attrs:{disabled:e.typeDisabled,label:t.value},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._v(e._s(t.label))])})),1),e._v(" "),e.form.type===e.enums.ResourceTypeEnum.MENU.value?n("el-form-item",{attrs:{label:"样式:"}},[n("el-input",{attrs:{placeholder:"请输入菜单图标样式"},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon","string"==typeof t?t.trim():t)},expression:"form.icon"}})],1):e._e(),e._v(" "),e.form.type===e.enums.ResourceTypeEnum.MENU.value?n("el-form-item",{attrs:{prop:"code",label:"路由code:"}},[n("el-input",{attrs:{placeholder:"请输入路由code"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code","string"==typeof t?t.trim():t)},expression:"form.code"}})],1):e._e(),e._v(" "),e.form.type===e.enums.ResourceTypeEnum.PERMISSION.value?n("el-form-item",{attrs:{prop:"code",label:"权限code:",required:""}},[n("el-input",{attrs:{placeholder:"请输入权限code"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code","string"==typeof t?t.trim():t)},expression:"form.code"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"序号:",required:""}},[n("el-input",{attrs:{type:"number",placeholder:"请输入序号"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight","string"==typeof t?t.trim():t)},expression:"form.weight"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.btnLoading,size:"small"},on:{click:e.btnOk}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,null,null).exports,x={data:function(){return{enums:d.a,permission:u.a.menu,showBtns:!1,rightClickData:{},dialogForm:{title:"",visible:!1,data:{},typeDisabled:!0},data:[],props:{label:"name",children:"children"},defaultExpandedKeys:[]}},methods:{deleteMenu:function(e){var t=this;this.$confirm("此操作将删除 [".concat(e.name,"], 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.permission.del.request({id:e.id}).then((function(e){t.$message.success("删除成功！"),t.search()}))}))},search:(v=o()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.permission.list.request(null);case 2:t=e.sent,this.data=t;case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)}),addResource:function(e){var t=this.dialogForm;t.visible=!0,t.data={};var n=d.a.ResourceTypeEnum.MENU.value,i=d.a.ResourceTypeEnum.PERMISSION.value;if(!e)return t.typeDisabled=!0,t.data.type=n,void(t.title="添加顶级菜单");if(t.data.pid=e.id,t.title="添加“"+e.name+"”的子资源 ",null===e.children||0===e.children.length)t.typeDisabled=!1;else{t.typeDisabled=!0;var r=!1,s=!0,o=!1,a=void 0;try{for(var l,c=e.children[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){if(l.value.type===i){r=!0;break}}}catch(e){o=!0,a=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw a}}t.data.type=r?i:n}},editResource:(h=o()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.permission.detail.request({id:t});case 2:n=e.sent,this.dialogForm.data=n,this.dialogForm.typeDisabled=!0,this.dialogForm.title="修改“"+n.name+"”菜单",this.dialogForm.visible=!0;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)}),valChange:function(e){this.search(),this.dialogForm.visible=!1},editorCancel:function(){this.dialogForm.visible=!1,this.dialogForm.data=null},changeStatus:(f=o()(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.permission.changeStatus.request({id:t.id,status:n});case 2:t.status=n,this.$message.success("操作成功！");case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)}),handleNodeExpand:function(e,t){var n=t.data.id;this.defaultExpandedKeys.includes(n)||this.defaultExpandedKeys.push(n)},handleNodeCollapse:function(e,t){this.removeDeafultExpandId(t.data.id);var n=t.childNodes,i=!0,r=!1,s=void 0;try{for(var o,a=n[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var l=o.value;if(2==l.data.type)return;l.expanded&&this.removeDeafultExpandId(l.data.id),this.handleNodeCollapse(e,l)}}catch(e){r=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}},removeDeafultExpandId:function(e){var t=this.defaultExpandedKeys.indexOf(e);t>-1&&this.defaultExpandedKeys.splice(t,1)},info:(m=o()(r.a.mark((function e(t){var n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.permission.detail.request({id:t});case 2:if(n=e.sent,(i=n).type!==d.a.ResourceTypeEnum.MENU.value){e.next=7;break}return this.$alert('<strong style="margin-right: 18px">名称:</strong>'+i.name+' <br/><br/><strong style="margin-right: 18px">图标:</strong>'+(i.icon?i.icon:"无")+' <br/><br/><strong style="margin-right: 18px">路径code:</strong>'+(i.code?i.code:"无")+' <br/><br/><strong style="margin-right: 18px">权重:</strong>'+i.weight+' <br/><br/><strong style="margin-right: 18px">新建时间:</strong>'+i.createTime+' <br/><br/><strong style="margin-right: 18px">修改时间:</strong>'+i.updateTime,"菜单详情",{type:"info",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,showConfirmButton:!1}).catch((function(e){})),e.abrupt("return");case 7:this.$alert('<strong style="margin-right: 18px">名称:</strong>'+i.name+' <br/><br/><strong style="margin-right: 18px">权限code:</strong>'+(i.code?i.code:"无")+' <br/><br/><strong style="margin-right: 18px">权重:</strong>'+i.weight+' <br/><br/><strong style="margin-right: 18px">新建时间:</strong>'+i.createTime+' <br/><br/><strong style="margin-right: 18px">修改时间:</strong>'+i.updateTime,"权限详情",{type:"info",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,showConfirmButton:!1}).catch((function(e){}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},components:{ToolBar:a.a,ResourceEdit:b},mounted:function(){this.search()}},_=(n(221),Object(y.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu"},[n("ToolBar",[n("div",[n("span",{staticStyle:{"font-size":"14px"}},[n("i",{staticClass:"el-icon-info"}),e._v("红色字体表示禁用状态")])]),e._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.save.code,expression:"permission.save.code"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.addResource(!1)}}},[e._v("添加")])],1),e._v(" "),n("el-tree",{staticClass:"none-select",attrs:{indent:38,"node-key":"id",props:e.props,data:e.data,"default-expanded-keys":e.defaultExpandedKeys,"expand-on-click-node":!1},on:{"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var i=t.data;return n("span",{staticClass:"custom-tree-node"},[i.type===e.enums.ResourceTypeEnum.MENU.value?n("span",{staticStyle:{"font-size":"13px"}},[n("span",{staticStyle:{color:"#3c8dbc"}},[e._v("【")]),e._v(e._s(i.name)),n("span",{staticStyle:{color:"#3c8dbc"}},[e._v("】")]),e._v(" "),null!==i.children?n("el-tag",{attrs:{size:"mini"}},[e._v(e._s(i.children.length))]):e._e()],1):e._e(),e._v(" "),i.type===e.enums.ResourceTypeEnum.PERMISSION.value?n("span",{staticStyle:{"font-size":"13px"}},[n("span",{staticStyle:{color:"#3c8dbc"}},[e._v("【")]),e._v(" "),n("span",{style:1==i.status?"color: #67c23a;":"color: #f67c6c;"},[e._v(e._s(i.name))]),e._v(" "),n("span",{staticStyle:{color:"#3c8dbc"}},[e._v("】")])]):e._e(),e._v(" "),n("el-link",{staticStyle:{"margin-left":"25px"},attrs:{icon:"el-icon-view",type:"info",underline:!1},on:{click:function(t){return e.info(i.id)}}}),e._v(" "),n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.update.code,expression:"permission.update.code"}],attrs:{type:"primary",icon:"el-icon-edit",underline:!1},on:{click:function(t){return e.editResource(i.id)}}}),e._v(" "),i.type===e.enums.ResourceTypeEnum.MENU.value?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.save.code,expression:"permission.save.code"}],attrs:{icon:"el-icon-circle-plus-outline",underline:!1,type:"success"},on:{click:function(t){return e.addResource(i)}}}):e._e(),e._v(" "),1===i.status&&i.type===e.enums.ResourceTypeEnum.PERMISSION.value?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.changeStatus.code,expression:"permission.changeStatus.code"}],attrs:{icon:"el-icon-circle-close",underline:!1,type:"warning"},on:{click:function(t){return e.changeStatus(i,0)}}}):e._e(),e._v(" "),0===i.status&&i.type===e.enums.ResourceTypeEnum.PERMISSION.value?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.changeStatus.code,expression:"permission.changeStatus.code"}],attrs:{type:"success",icon:"el-icon-circle-check",underline:!1,plain:""},on:{click:function(t){return e.changeStatus(i,1)}}}):e._e(),e._v(" "),null==i.children?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.del.code,expression:"permission.del.code"}],attrs:{type:"danger",icon:"el-icon-remove-outline",underline:!1,plain:""},on:{click:function(t){return e.deleteMenu(i)}}}):e._e()],1)}}])}),e._v(" "),n("ResourceEdit",{attrs:{title:e.dialogForm.title,dialogFormVisible:e.dialogForm.visible,data:e.dialogForm.data,typeDisabled:e.dialogForm.typeDisabled,departTree:e.data,type:e.dialogForm.type},on:{"val-change":e.valChange,cancel:function(t){return e.editorCancel()}}})],1)}),[],!1,null,null,null));t.default=_.exports}}]);