(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{199:function(e,t,n){var s=n(37),a=n(222);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1},i=(s(e.i,a,r),a.locals?a.locals:{});e.exports=i},204:function(e,t,n){"use strict";var s={name:"HelpHint",props:{placement:{default:"top"},content:String},data:function(){return{}}},a=n(66),r=Object(a.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("span",{staticStyle:{"margin-right":"8px"}},[this._t("default")],2),this._v(" "),t("el-tooltip",{attrs:{content:this.content,placement:this.placement}},[t("i",{staticClass:"el-icon-question",staticStyle:{cursor:"pointer"}})])],1)}),[],!1,null,null,null);t.a=r.exports},221:function(e,t,n){"use strict";var s=n(199);n.n(s).a},222:function(e,t,n){(t=n(38)(!1)).push([e.i,"",""]),e.exports=t},233:function(e,t,n){"use strict";n.r(t);var s,a,r,i=n(183),o=n.n(i),l=n(184),c=n.n(l),u=n(186),p=n(204),d=n(187),m=(n(19),{name:"RoleEdit",props:{visible:!1,account:[Object,Boolean]},data:function(){return{permission:d.a.account,btnLoading:!1,allRole:[],roles:[],query:{status:1,pageNum:1,pageSize:8,code:null,groupId:null},total:0,groups:[]}},watch:{account:{handler:function(){var e=this;this.account&&this.permission.roles.request({id:this.account.id}).then((function(t){e.roles=t,e.search()}))},deep:!0}},methods:{handlePageChange:function(e){this.search()},select:function(e,t){var n=this.roles;if(n.includes(t.id))for(var s=0;s<n.length;s++){if(n[s]===t.id){n.splice(s,1);break}}else n.push(t.id)},checkSelected:function(){var e=this;setTimeout((function(){e.$refs.roleTable.clearSelection(),e.allRole.forEach((function(t){e.roles.includes(t.id)&&e.$refs.roleTable.toggleRowSelection(t,!0)}))}),50)},btnOk:(a=c()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.roles.join(","),e.next=3,this.permission.saveRoles.request({id:this.account.id,roleIds:t});case 3:this.$message.success("保存成功!"),this.cancel();case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),cancel:function(){this.query.pageNum=1,this.query.code=null,this.$emit("cancel")},clear:function(){this.query.pageNum=1,this.query.code=null,this.search()},search:(s=c()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.role.list.request();case 2:t=e.sent,this.allRole=t,this.total=t.total,this.checkSelected();case 6:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},mounted:function(){},components:{ToolBar:u.a}}),h=(n(221),n(66)),f=Object(h.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"account-dialog"},[n("el-dialog",{attrs:{title:"分配“"+e.account.username+"”的角色",visible:e.visible,"show-close":!1}},[n("el-table",{ref:"roleTable",staticStyle:{width:"100%"},attrs:{data:e.allRole,border:""},on:{select:e.select}},[n("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"角色描述"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[e._v("\n          "+e._s(t.row.remark?t.row.remark:"暂无描述")+"\n        ")])}}])})],1),e._v(" "),n("el-pagination",{staticStyle:{"text-align":"center","margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next, total, jumper",total:e.total,"current-page":e.query.pageNum,"page-size":e.query.pageSize},on:{"current-change":e.handlePageChange,"update:currentPage":function(t){return e.$set(e.query,"pageNum",t)},"update:current-page":function(t){return e.$set(e.query,"pageNum",t)}}}),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancel()}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.btnLoading,size:"small"},on:{click:e.btnOk}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,null,null).exports,v=n(191),g={name:"AccountEdit",props:{visible:Boolean,account:[Object,Boolean],title:String},data:function(){return{permission:d.a.account,enums:v.a,edit:!1,form:{id:null,username:null,password:null,repassword:null},btnLoading:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:["change","blur"]}],password:[{required:!0,message:"请输入密码",trigger:["change","blur"]}]}}},watch:{account:{handler:function(){this.account?(this.edit=!0,this.$Utils.copyProperties(this.account,this.form)):this.edit=!1},deep:!0}},methods:{btnOk:function(){var e=c()(o.a.mark((function e(){var t,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.form.id?this.permission.update:this.permission.save,this.$Permission.getPermission(t.code).show?this.$refs.accountForm.validate((function(e){if(!e)return n.$message.error("表单填写有误"),!1;t.request(n.form).then((function(e){n.$message.success("操作成功"),n.$emit("val-change",n.form),n.btnLoading=!0,setTimeout((function(){n.btnLoading=!1}),1e3),n.$refs.accountForm.resetFields(),n.$Utils.resetProperties(n.form)}))})):this.$message.error("您没有该权限!");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),cancel:function(){var e=this;this.$emit("cancel"),setTimeout((function(){e.$refs.accountForm.resetFields(),e.$Utils.resetProperties(e.form)}),200)}},mounted:function(){},components:{}},b=Object(h.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"account-dialog"},[n("el-dialog",{attrs:{title:e.title,visible:e.visible,"show-close":!1,width:"35%"}},[n("el-form",{ref:"accountForm",attrs:{model:e.form,rules:e.rules,"label-width":"85px",size:"small"}},[n("el-form-item",{attrs:{prop:"username",label:"用户名:",required:""}},[n("el-input",{attrs:{disabled:e.edit,placeholder:"请输入用户名","auto-complete":"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"==typeof t?t.trim():t)},expression:"form.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password",label:"密码:",required:""}},[n("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"new-password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"==typeof t?t.trim():t)},expression:"form.password"}})],1),e._v(" "),e.edit?e._e():n("el-form-item",{attrs:{label:"确认密码:",required:""}},[n("el-input",{attrs:{type:"password",placeholder:"请输入确认密码",autocomplete:"new-password"},model:{value:e.form.repassword,callback:function(t){e.$set(e.form,"repassword","string"==typeof t?t.trim():t)},expression:"form.repassword"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.btnLoading,size:"small"},on:{click:e.btnOk}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,null,null).exports,_={data:function(){return{permission:d.a.account,currentId:null,currentData:null,query:{pageNum:1,pageSize:10},datas:[],total:null,roleDialog:{visible:!1,account:{},roles:[]},accountDialog:{visible:!1,data:!1}}},methods:{choose:function(e){e&&(this.currentId=e.id,this.currentData=e)},search:function(){var e=c()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.permission.list.request(this.query);case 2:t=e.sent,this.datas=t.list,this.total=t.total;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),changeStatus:(r=c()(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.permission.changeStatus.request({id:t,status:n});case 2:this.$message.success("操作成功"),this.search();case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)}),handlePageChange:function(e){this.query.pageNum=e,this.search()},roleEdit:function(){this.currentId||this.$message.error("请选择账号"),this.roleDialog.visible=!0,this.roleDialog.account=this.currentData},editAccount:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.accountDialog.data=!e&&this.currentData,this.accountDialog.visible=!0},cancel:function(){this.roleDialog.visible=!1,this.roleDialog.account=!1,this.search()},accountDialogCancel:function(){var e=this;this.accountDialog.visible=!1,setTimeout((function(){e.accountDialog.data=!1}),800)},valChange:function(){this.accountDialog.visible=!1,this.search()},deleteAccount:function(){var e=this;this.permission.del.request({id:this.currentId}).then((function(t){e.$message.success("删除成功"),e.search()}))}},mounted:function(){this.search()},components:{ToolBar:u.a,HelpHint:p.a,RoleEdit:f,AccountEdit:b}},w=Object(h.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role-list"},[n("ToolBar",[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.save.code,expression:"permission.save.code"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.editAccount(!0)}}},[e._v("添加")]),e._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.save.code,expression:"permission.save.code"}],attrs:{disabled:null==e.currentId,type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.editAccount(!1)}}},[e._v("编辑")]),e._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.saveRoles.code,expression:"permission.saveRoles.code"}],attrs:{disabled:null==e.currentId,type:"success",icon:"el-icon-setting",size:"mini"},on:{click:function(t){return e.roleEdit()}}},[e._v("角色分配")]),e._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.del.code,expression:"permission.del.code"}],attrs:{disabled:null==e.currentId,type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.deleteAccount()}}},[e._v("删除")]),e._v(" "),n("div",{staticStyle:{float:"right"}},[n("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"请输入账号名",size:"small",clearable:""},on:{clear:function(t){return e.edit()}},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}}),e._v(" "),n("el-button",{attrs:{type:"success",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.edit()}}})],1)],1),e._v(" "),n("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.datas,border:""},on:{"current-change":e.choose}},[n("el-table-column",{attrs:{label:"选择",width:"55px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-radio",{attrs:{label:t.row.id},model:{value:e.currentId,callback:function(t){e.currentId=t},expression:"currentId"}},[n("i")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"序号",type:"index"}}),e._v(" "),n("el-table-column",{attrs:{prop:"username",label:"用户名",width:"115vh"}}),e._v(" "),n("el-table-column",{attrs:{prop:"status",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roles,(function(t){return n("el-tag",{key:t.id,attrs:{type:1===t.status?"success":"danger"}},[e._v(e._s(t.name))])}))}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(1==t.row.status?"启用":"禁用")+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"updateTime",label:"修改时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.changeStatus.code,expression:"permission.changeStatus.code"}],attrs:{type:"success",size:"mini"},on:{click:function(n){return e.changeStatus(t.row.id,1)}}},[e._v("启用")]):e._e(),e._v(" "),1==t.row.status?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.changeStatus.code,expression:"permission.changeStatus.code"}],attrs:{type:"danger",size:"mini"},on:{click:function(n){return e.changeStatus(t.row.id,0)}}},[e._v("禁用")]):e._e()]}}])})],1),e._v(" "),n("el-pagination",{staticStyle:{"text-align":"center","margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next, total, jumper",total:e.total,"current-page":e.query.pageNum,"page-size":e.query.pageSize},on:{"current-change":e.handlePageChange,"update:currentPage":function(t){return e.$set(e.query,"pageNum",t)},"update:current-page":function(t){return e.$set(e.query,"pageNum",t)}}}),e._v(" "),n("RoleEdit",{attrs:{visible:e.roleDialog.visible,account:e.roleDialog.account},on:{cancel:function(t){return e.cancel()}}}),e._v(" "),n("AccountEdit",{attrs:{visible:e.accountDialog.visible,account:e.accountDialog.data},on:{cancel:function(t){return e.accountDialogCancel()},"val-change":function(t){return e.valChange()}}})],1)}),[],!1,null,null,null).exports;n.d(t,"default",(function(){return w}))}}]);