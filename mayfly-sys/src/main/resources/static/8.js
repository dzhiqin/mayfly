(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{201:function(e,s,t){var i=t(37),a=t(226);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var l={insert:"head",singleton:!1},n=(i(e.i,a,l),a.locals?a.locals:{});e.exports=n},202:function(e,s,t){"use strict";var i=t(18),a={redis:{list:i.a.url("/devops/redis").method("get").code("redis:list"),info:i.a.url("/devops/redis/{id}/info").method("get").code("redis:info"),del:i.a.url("/devops/redis/{id}").method("delete").code("redis:delete"),save:i.a.url("/devops/redis").method("post").code("permission:save"),update:i.a.url("/devops/redis/{id}").method("put").code("redis:key:update")},redisKey:{scan:i.a.url("/devops/redis/{cluster}/{id}/scan").method("get").code("redis:key:scan"),value:i.a.url("/devops/redis/{cluster}/{id}/value").method("get").code("redis:key:value"),update:i.a.url("/devops/redis/{cluster}/{id}").method("put").code("redis:key:update"),del:i.a.url("/devops/redis/{cluster}/{id}").method("delete").code("redis:key:delete")}};s.a=a},225:function(e,s,t){"use strict";var i=t(201);t.n(i).a},226:function(e,s,t){(s=t(38)(!1)).push([e.i,"\n.row .title {\n  font-size: 12px;\n}\n.row .value {\n  font-size: 12px;\n  color: black;\n}\n",""]),e.exports=s},237:function(e,s,t){"use strict";t.r(s);var i,a=t(183),l=t.n(a),n=t(184),o=t.n(n),r=t(186),c=(t(39),{props:{visible:Boolean,info:Object},data:function(){return{name:""}},watch:{},methods:{close:function(){this.name="",this.$emit("close")}}}),u=(t(225),t(66)),d=Object(u.a)(c,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("el-dialog",{attrs:{title:"info",visible:e.visible,"show-close":!0,width:"35%"},on:{close:function(s){return e.close()}}},[t("el-collapse",{model:{value:e.name,callback:function(s){e.name=s},expression:"name"}},[t("el-collapse-item",{attrs:{title:"Server(Redis服务器的一般信息)",name:"server"}},[t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("redis_version(版本):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Server.redis_version))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("tcp_port(端口):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Server.tcp_port))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("redis_mode(模式):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Server.redis_mode))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("os(宿主操作系统):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Server.os))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("uptime_in_days(运行天数):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Server.uptime_in_days))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("executable(可执行文件路径):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Server.executable))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("config_file(配置文件路径):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Server.config_file))])])]),e._v(" "),t("el-collapse-item",{attrs:{title:"Clients(客户端连接部分)",name:"client"}},[t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("connected_clients(已连接客户端数):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Clients.connected_clients))])])]),e._v(" "),t("el-collapse-item",{attrs:{title:"Memory(内存消耗相关信息)",name:"memory"}},[t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("used_memory(分配内存总量):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Memory.used_memory_human))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("used_memory_rss(已分配的内存总量，操作系统角度):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Memory.used_memory_rss_human))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("mem_fragmentation_ratio(used_memory_rss和used_memory 之间的比率):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Memory.mem_fragmentation_ratio))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("used_memory_peak(内存消耗峰值):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Memory.used_memory_peak_human))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("total_system_memory(主机总内存):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.Memory.total_system_memory_human))])])]),e._v(" "),t("el-collapse-item",{attrs:{title:"CPU",name:"cpu"}},[t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("used_cpu_sys(由Redis服务器消耗的系统CPU):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.CPU.used_cpu_sys))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("used_cpu_user(由Redis服务器消耗的用户CPU):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.CPU.used_cpu_user))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("used_cpu_sys_children(由后台进程消耗的系统CPU):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.CPU.used_cpu_sys_children))])]),e._v(" "),t("div",{staticClass:"row"},[t("span",{staticClass:"title"},[e._v("used_cpu_user_children(由后台进程消耗的用户CPU):")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(e.info.CPU.used_cpu_user_children))])])])],1)],1)],1)}),[],!1,null,null,null).exports,p=t(202),v=t(206),_=(t(40),{data:function(){return{redisTable:[],permission:p.a.redis,keyPermission:p.a.redisKey,currentId:null,currentData:null,params:{host:null,clusterId:null},redisInfo:{url:""},clusters:[{id:0,name:"单机"}],infoDialog:{visible:!1,info:{Server:{},Keyspace:{},Clients:{},CPU:{},Memory:{}}},formDialog:{visible:!1,title:null,formInfo:{addPermission:p.a.redis.save,updatePermission:p.a.redis.update,formRows:[[{type:"input",label:"主机：",name:"host",placeholder:"请输入节点ip",rules:[{required:!0,message:"请输入节点ip",trigger:["blur","change"]}]}],[{type:"input",label:"端口号：",name:"port",placeholder:"请输入节点端口号",inputType:"number",rules:[{required:!0,message:"请输入节点端口号",trigger:["blur","change"]}]}],[{type:"input",label:"密码：",name:"pwd",placeholder:"请输入节点密码",inputType:"password"}],[{type:"input",label:"描述：",name:"description",placeholder:"请输入节点描述",inputType:"textarea"}]]},formData:null}}},methods:{choose:function(e){e&&(this.currentId=e.id,this.currentData=e)},connect:function(){var e=this;Req.post("/open/redis/connect",this.form,(function(s){e.redisInfo=s}))},deleteNode:(i=o()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.permission.del.request({id:this.currentId});case 2:this.$message.success("删除成功"),this.search();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),manage:function(e){this.$router.push("/redis_operation/".concat(e.clusterId,"/").concat(e.id))},info:function(e){var s=this;this.permission.info.request({id:e}).then((function(t){s.infoDialog.info=t,s.infoDialog.id=e,s.infoDialog.visible=!0}))},search:function(){var e=this;this.permission.list.request(this.params).then((function(s){e.redisTable=s}))},openFormDialog:function(e){var s;e?(this.formDialog.formData=this.currentData,s="编辑redis节点"):(this.formDialog.formData={port:6379},s="添加redis节点"),this.formDialog.title=s,this.formDialog.visible=!0},closeDialog:function(){this.formDialog.visible=!1,this.formDialog.formData=null},submitSuccess:function(){this.currentId=null,this.currentData=null,this.search()}},mounted:function(){this.search()},components:{ToolBar:r.a,Info:d,DynamicFormDialog:v.a}}),m=Object(u.a)(_,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("ToolBar",[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(s){return e.openFormDialog(!1)}}},[e._v("添加")]),e._v(" "),t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",disabled:null==e.currentId,size:"mini",plain:""},on:{click:function(s){return e.openFormDialog(e.currentData)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:null==e.currentId,size:"mini",plain:""},on:{click:e.deleteNode}},[e._v("删除")]),e._v(" "),t("div",{staticStyle:{float:"right"}},[t("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"host",size:"mini",plain:"",clearable:""},on:{clear:e.search},model:{value:e.params.host,callback:function(s){e.$set(e.params,"host",s)},expression:"params.host"}}),e._v(" "),t("el-select",{attrs:{size:"mini",clearable:"",placeholder:"集群选择"},model:{value:e.params.clusterId,callback:function(s){e.$set(e.params,"clusterId",s)},expression:"params.clusterId"}},e._l(e.clusters,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1),e._v(" "),t("el-button",{attrs:{type:"success",icon:"el-icon-search",size:"mini"},on:{click:e.search}})],1)],1),e._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.redisTable,stripe:""},on:{"current-change":e.choose}},[t("el-table-column",{attrs:{label:"选择",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-radio",{attrs:{label:s.row.id},model:{value:e.currentId,callback:function(s){e.currentId=s},expression:"currentId"}},[t("i")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"host",label:"IP",width:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"port",label:"端口",width:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"clusterId",label:"集群id"}}),e._v(" "),t("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.info.code,expression:"permission.info.code"}],ref:s.row,attrs:{type:"primary",icom:"el-icon-tickets",size:"mini",plain:""},on:{click:function(t){return e.info(s.row.id)}}},[e._v("info")]),e._v(" "),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.keyPermission.scan.code,expression:"keyPermission.scan.code"}],ref:s.row,attrs:{type:"success",size:"mini",plain:""},on:{click:function(t){return e.manage(s.row)}}},[e._v("数据管理")])]}}])})],1),e._v(" "),t("Info",{attrs:{visible:e.infoDialog.visible,info:e.infoDialog.info},on:{close:function(s){e.infoDialog.visible=!1}}}),e._v(" "),t("dynamic-form-dialog",{attrs:{"dialog-width":e.formDialog.dialogWidth,visible:e.formDialog.visible,title:e.formDialog.title,"form-info":e.formDialog.formInfo,"form-data":e.formDialog.formData},on:{cancel:e.closeDialog,submitSuccess:e.submitSuccess}})],1)}),[],!1,null,null,null).exports;t.d(s,"default",(function(){return m}))}}]);