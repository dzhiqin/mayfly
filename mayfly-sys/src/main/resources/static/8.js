(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{168:function(t,e,n){"use strict";var a,i=n(19),s=n.n(i),o=n(36),r=n(184),l=n.n(r),c=n(10),u=n(1);!function(t){t[t.SUCCESS=200]="SUCCESS",t[t.ERROR=400]="ERROR",t[t.PARAM_ERROR=405]="PARAM_ERROR",t[t.SERVER_ERROR=500]="SERVER_ERROR",t[t.NO_PERMISSION=501]="NO_PERMISSION"}(a||(a={}));const h=u.a.apiUrl;function d(t){s.a.Message.error(t)}const p=l.a.create({baseURL:h,timeout:5e3});function m(t,e){return t.replace(/\{\w+\}/g,t=>{let n=t.substring(1,t.length-1),a=e[n];return null!=a||null!=a?a:""})}function f(t,e,n){if(!e)throw new Error("请求url不能为空");-1!=e.indexOf("{")&&(e=m(e,n));const a={method:t,url:e},i=t.toLowerCase();return"post"===i||"put"===i?a.data=n:a.params=n,p.request(a).then(t=>t).catch(t=>(d(t.msg||t.message),Promise.reject(t)))}p.interceptors.request.use(t=>{const e=c.a.getToken();return e&&(t.headers.token=e),t},t=>(console.log(t),Promise.reject(t))),p.interceptors.response.use(t=>{const e=t.data;return e.code===a.NO_PERMISSION?(c.a.removeToken(),d("登录超时"),void setTimeout(()=>{o.a.push({path:"/login"})},1e3)):e.code===a.SUCCESS?e.data:Promise.reject(e)},t=>Promise.reject(t)),e.a={request:f,send:function(t,e){return f(t.method,t.url,e)},parseRestUrl:m,getApiUrl:function(t){return h+"?token="+c.a.getToken()}}},251:function(t,e,n){var a=n(34),i=n(398);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var s={insert:"head",singleton:!1};a(i,s);t.exports=i.locals||{}},252:function(t,e,n){"use strict";var a=n(168);e.a={login:t=>a.a.request("POST","/open/login",t),captcha:()=>a.a.request("GET","/open/captcha",null),logout:t=>a.a.request("POST","/sys/accounts/logout/{token}",t)}},253:function(t,e,n){var a=n(34),i=n(416);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var s={insert:"head",singleton:!1};a(i,s);t.exports=i.locals||{}},397:function(t,e,n){"use strict";var a=n(251);n.n(a).a},398:function(t,e,n){(e=n(35)(!1)).push([t.i,".footer {\n  width: 100%;\n  font-size: 14px;\n  background: #fff;\n  line-height: 50px;\n  padding: 0 12px;\n  height: 50px;\n  color: #444;\n  border-top: 1px solid #d2d6de;\n}\n.footer .version {\n  float: right;\n}\n.footer .version b {\n  font-weight: 700;\n}\n.footer .version .github {\n  color: #444;\n  font-size: 20px;\n  margin-left: 8px;\n}\n.footer .version .github:hover {\n  color: #8bc34a;\n}\n",""]),t.exports=e},415:function(t,e,n){"use strict";var a=n(253);n.n(a).a},416:function(t,e,n){(e=n(35)(!1)).push([t.i,".main {\n  display: flex;\n}\n.main .el-menu:not(.el-menu--collapse) {\n  width: 230px;\n}\n.main .app {\n  width: 100%;\n  background-color: #ecf0f5;\n}\n.main .aside {\n  position: fixed;\n  margin-top: 50px;\n  z-index: 10;\n  background-color: #222d32;\n  transition: all 0.3s ease-in-out;\n}\n.main .aside .menu {\n  overflow-y: auto;\n  height: calc(100vh);\n}\n.main .app-body {\n  margin-left: 230px;\n  -webkit-transition: margin-left 0.3s ease-in-out;\n  transition: margin-left 0.3s ease-in-out;\n}\n.main .main-container {\n  margin-top: 88px;\n  padding: 2px;\n  min-height: calc(100vh - 88px);\n}\n.header {\n  width: 100%;\n  position: fixed;\n  display: flex;\n  height: 50px;\n  background-color: #303643;\n  z-index: 10;\n}\n.header .logo {\n  width: 230px;\n  height: 50px;\n  text-align: center;\n  line-height: 50px;\n  color: #fff;\n  background-color: #303643;\n  -webkit-transition: width 0.35s;\n  transition: all 0.3s ease-in-out;\n}\n.header .logo .min {\n  display: none;\n}\n.header .right {\n  position: absolute;\n  right: 0;\n}\n.header .header-btn {\n  overflow: hidden;\n  height: 50px;\n  display: inline-block;\n  text-align: center;\n  line-height: 50px;\n  cursor: pointer;\n  padding: 0 14px;\n  color: #fff;\n}\n.header .header-btn .el-badge__content {\n  top: 14px;\n  right: 7px;\n  text-align: center;\n  font-size: 9px;\n  padding: 0 3px;\n  background-color: #00a65a;\n  color: #fff;\n  border: none;\n  white-space: nowrap;\n  vertical-align: baseline;\n  border-radius: 0.25em;\n}\n.header .header-btn:hover {\n  background-color: #222d32;\n}\n.menu {\n  border-right: none;\n  moz-user-select: -moz-none;\n  -moz-user-select: none;\n  -o-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.el-menu--vertical {\n  min-width: 190px;\n}\n.setting-category {\n  padding: 10px 0;\n  border-bottom: 1px solid #eee;\n}\n#mainContainer iframe {\n  border: none;\n  outline: none;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  background-color: #ecf0f5;\n}\n.el-submenu__title {\n  font-weight: 500;\n}\n.el-menu-item {\n  font-weight: 500;\n}\n#nav-bar {\n  margin-top: 50px;\n  height: 38px;\n  width: 100%;\n  z-index: 8;\n  background: #fff;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12), 0 0 3px 0 rgba(0, 0, 0, 0.04);\n  position: fixed;\n  top: 0;\n}\n",""]),t.exports=e},741:function(t,e,n){"use strict";n.r(e);var a=n(61),i=n(33),s={data:function(){return{}},methods:{}},o=(n(397),n(60)),r=Object(o.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[n("div",{staticClass:"version"},[n("b",[t._v("Version")]),t._v("\n    "+t._s(t.$Config.version)+"\n    "),n("a",{attrs:{href:t.$Config.gitHub,target:"_blank"}},[n("i",{staticClass:"fa fa-github github"})])]),t._v(" "),n("strong",[t._v("\n    Copyright © 2014-2016\n    "),n("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.$Config.siteName))]),t._v(".\n  ")]),t._v(" All rights reserved.\n")])}),[],!1,null,null,null).exports,l=n(0).default.extend({props:["menus"],name:"MenuTree",methods:{toPath(t){this.$emit("toPath",t)}}}),c=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(this.menus,(function(e){return[e.children&&1===e.children[0].type?n("el-submenu",{key:e.id,attrs:{index:e.code?e.code:e.id+""}},[n("template",{slot:"title"},[n("i",{class:e.icon}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])]),t._v(" "),n("MenuTree",{attrs:{menus:e.children},on:{toPath:t.toPath}})],2):n("el-menu-item",{key:e.id,attrs:{index:e.path?e.path:e.id+""},on:{click:function(n){return t.toPath(e)}}},[n("i",{staticClass:"iconfont",class:e.icon}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])])]}))],2)}),[],!1,null,null,null).exports,u=n(252);var h=(()=>{let t=class extends i.c{constructor(){super(...arguments),this.iframe=!1,this.iframeSrc=null,this.username="",this.menus=[],this.tabs=[],this.activeName="",this.tabIndex=2}toPath(t){let e=t.url;this.goToPath(e),this.addTab(e,t.name)}goToPath(t){if(t&&(t.startsWith("http://")||t.startsWith("https://")))return this.iframe=!0,void(this.iframeSrc=t);this.iframe=!1,this.iframeSrc=null,this.$router.push({path:t}).catch(t=>{})}tabClick(t){this.goToPath(t.name)}addTab(t,e){for(let e of this.tabs)if(e.name===t)return void(this.activeName=t);this.tabs.push({name:t,title:e}),this.activeName=t}removeTab(t){let e=this.tabs,n=this.activeName;n===t&&e.forEach((a,i)=>{if(a.name==t){let t=e[i+1]||e[i-1];t&&(n=t.name)}}),this.activeName=n,this.tabs=e.filter(e=>e.name!==t),this.goToPath(n)}async logout(){await u.a.logout({token:this.$Permission.getToken()}),sessionStorage.clear(),this.$router.push({path:"/login"})}mounted(){let t=sessionStorage.getItem(this.$Config.name.menusKey);null!=t&&(this.menus=JSON.parse(t));let e=sessionStorage.getItem(this.$Config.name.adminKey);null!=e&&(this.username=JSON.parse(e).username),this.addTab(this.$route.path,this.$route.meta.title)}};return t=Object(a.a)([Object(i.a)({name:"app",components:{EuiFooter:r,MenuTree:c}})],t),t})(),d=(n(415),Object(o.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{staticClass:"header"},[n("div",{staticClass:"logo"},[n("span",{staticClass:"big"},[t._v(t._s(t.$Config.name.siteName))])]),t._v(" "),n("div",{staticClass:"right"},[n("span",{staticClass:"header-btn"},[n("el-badge",{staticClass:"badge",attrs:{value:3}},[n("i",{staticClass:"el-icon-bell"})])],1),t._v(" "),n("el-dropdown",[n("span",{staticClass:"header-btn"},[t._v("\n          "+t._s(t.username)+"\n          "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return this.$router.push("/personal")}}},[n("i",{staticClass:"fa fa-cog",staticStyle:{"padding-right":"8px"}}),t._v("个人中心\n          ")]),t._v(" "),n("el-dropdown-item",{nativeOn:{click:function(e){return t.logout(e)}}},[n("i",{staticClass:"fa fa-key",staticStyle:{"padding-right":"8px"}}),t._v("退出系统\n          ")])],1)],1)],1)]),t._v(" "),n("div",{staticClass:"app"},[n("div",{staticClass:"aside"},[n("div",{staticClass:"menu"},[n("el-menu",{staticClass:"menu",attrs:{"background-color":"#222d32","text-color":"#bbbbbb","active-text-color":"#fff"}},[n("MenuTree",{attrs:{menus:this.menus},on:{toPath:t.toPath}})],1)],1)]),t._v(" "),n("div",{staticClass:"app-body"},[n("el-tabs",{staticClass:"none-select",attrs:{id:"nav-bar",type:"card",closable:""},on:{"tab-click":t.tabClick,"tab-remove":t.removeTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabs,(function(t){return n("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}})})),1),t._v(" "),n("div",{staticClass:"main-container",attrs:{id:"mainContainer"}},[t.iframe?n("iframe",{staticStyle:{width:"calc(100% - 235px)",height:"calc(100% - 90px)"},attrs:{rameborder:"0",src:t.iframeSrc}}):n("router-view")],1)],1)])])}),[],!1,null,null,null));e.default=d.exports}}]);